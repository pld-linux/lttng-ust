--- lttng-ust-2.4.0/liblttng-ust/Makefile.am.orig	2014-02-28 19:20:10.000000000 +0100
+++ lttng-ust-2.4.0/liblttng-ust/Makefile.am	2014-03-03 10:55:00.270969760 +0100
@@ -67,6 +67,7 @@
 	$(top_builddir)/libringbuffer/libringbuffer.la
 
 liblttng_ust_la_LIBADD = \
+	-ldl \
 	-lpthread \
 	-lrt \
 	-lurcu-cds \
--- lttng-ust-2.6.0/liblttng-ust-java/Makefile.am.orig	2015-01-26 21:09:30.334240517 +0100
+++ lttng-ust-2.6.0/liblttng-ust-java/Makefile.am	2015-01-26 21:11:19.994235912 +0100
@@ -12,7 +12,7 @@
 liblttng_ust_java_la_SOURCES = LTTngUst.c lttng_ust_java.h
 nodist_liblttng_ust_java_la_SOURCES = org_lttng_ust_LTTngUst.h
 
-liblttng_ust_java_la_LIBADD = -lc -L$(top_builddir)/liblttng-ust/.libs -llttng-ust
+liblttng_ust_java_la_LIBADD = -lc $(top_builddir)/liblttng-ust/liblttng-ust.la
 
 $(jarfile): classnoinst.stamp
 	$(JAR) cf $(JARFLAGS) $@ $(pkgpath)/*.class
--- lttng-ust-2.6.0/liblttng-ust-java-agent/jni/jul/Makefile.am.orig	2015-01-26 20:39:58.000000000 +0100
+++ lttng-ust-2.6.0/liblttng-ust-java-agent/jni/jul/Makefile.am	2015-01-26 21:17:08.297554669 +0100
@@ -6,4 +6,4 @@
 
 nodist_liblttng_ust_jul_jni_la_SOURCES = org_lttng_ust_agent_jul_LTTngLogHandler.h
 
-liblttng_ust_jul_jni_la_LIBADD = -lc -L$(top_builddir)/liblttng-ust/.libs -llttng-ust
+liblttng_ust_jul_jni_la_LIBADD = -lc $(top_builddir)/liblttng-ust/liblttng-ust.la
--- lttng-ust-2.6.0/liblttng-ust-java-agent/jni/log4j/Makefile.am.orig	2015-01-26 20:39:58.000000000 +0100
+++ lttng-ust-2.6.0/liblttng-ust-java-agent/jni/log4j/Makefile.am	2015-01-26 21:17:37.837553389 +0100
@@ -5,4 +5,4 @@
 
 nodist_liblttng_ust_log4j_jni_la_SOURCES = org_lttng_ust_agent_log4j_LTTngLogAppender.h
 
-liblttng_ust_log4j_jni_la_LIBADD = -lc -L$(top_builddir)/liblttng-ust/.libs -llttng-ust
+liblttng_ust_log4j_jni_la_LIBADD = -lc $(top_builddir)/liblttng-ust/liblttng-ust.la
